# ðŸ“Š Backend Architecture Diagrams

## Visual Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CLIENT                                 â”‚
â”‚                     (Next.js Frontend)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP/REST
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND SERVER                             â”‚
â”‚                    (Express + TypeScript)                       â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              PRESENTATION LAYER (Routes)                  â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  folderRoutes.ts        documentRoutes.ts                 â”‚  â”‚
â”‚  â”‚  â”œâ”€ GET /api/folders    â”œâ”€ GET /api/documents            â”‚  â”‚
â”‚  â”‚  â””â”€ POST /api/folders   â”œâ”€ POST /api/documents           â”‚  â”‚
â”‚  â”‚                          â””â”€ GET /api/documents/search     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           APPLICATION LAYER (Controllers)                 â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  folderController.ts    documentController.ts             â”‚  â”‚
â”‚  â”‚  â”œâ”€ getAllFolders()     â”œâ”€ getAllDocuments()             â”‚  â”‚
â”‚  â”‚  â””â”€ createFolder()      â”œâ”€ createDocument()              â”‚  â”‚
â”‚  â”‚                          â””â”€ searchDocuments()             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         BUSINESS LOGIC LAYER (Services)                   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  FolderService          DocumentService                   â”‚  â”‚
â”‚  â”‚  â”œâ”€ getAllFolders()     â”œâ”€ getDocuments()                â”‚  â”‚
â”‚  â”‚  â”œâ”€ createFolder()      â”œâ”€ createDocument()              â”‚  â”‚
â”‚  â”‚  â”œâ”€ folderExists()      â”œâ”€ searchDocuments()             â”‚  â”‚
â”‚  â”‚  â””â”€ deleteFolder()      â””â”€ deleteDocument()              â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Validates input, applies business rules,                 â”‚  â”‚
â”‚  â”‚  coordinates DAOs                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          DATA ACCESS LAYER (DAOs)                         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  FolderDAO              DocumentDAO                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ findAll()           â”œâ”€ findAll()                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ findById()          â”œâ”€ findById()                     â”‚  â”‚
â”‚  â”‚  â”œâ”€ create()            â”œâ”€ findByFolderId()              â”‚  â”‚
â”‚  â”‚  â”œâ”€ exists()            â”œâ”€ searchByName()                â”‚  â”‚
â”‚  â”‚  â””â”€ delete()            â”œâ”€ create()                       â”‚  â”‚
â”‚  â”‚                          â””â”€ delete()                       â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Executes SQL queries only                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            DATABASE CONFIG (Connection Pool)              â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  database.ts - MySQL connection pool                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MySQL DATABASE                             â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   folders   â”‚                â”‚  documents   â”‚               â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
â”‚  â”‚ id (PK)     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ id (PK)      â”‚               â”‚
â”‚  â”‚ name        â”‚ One-to-Many    â”‚ name         â”‚               â”‚
â”‚  â”‚ created_at  â”‚                â”‚ folder_id(FK)â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ file_type    â”‚               â”‚
â”‚                                  â”‚ size         â”‚               â”‚
â”‚                                  â”‚ created_at   â”‚               â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Request Flow Sequence Diagram

### POST /api/documents (Create Document)

```
Client          Route          Controller        Service         DAO          Database
  â”‚               â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚â”€POSTâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚ /api/docs     â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚ {name,folder} â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚               â”‚â”€createDocumentâ”€>â”‚               â”‚              â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚               â”‚                 â”‚â”€validateâ”€â”€â”€â”€â”€â”€>â”‚              â”‚              â”‚
  â”‚               â”‚                 â”‚ input         â”‚              â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚â”€exists()â”€â”€â”€â”€>â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚ folder_id    â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚â”€SELECTâ”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚ FROM folders â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚<â”€resultâ”€â”€â”€â”€â”€â”€â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚ (true)       â”‚
  â”‚               â”‚                 â”‚               â”‚<â”€trueâ”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚â”€create()â”€â”€â”€â”€>â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚ sanitized    â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚ data         â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚â”€INSERTâ”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚ INTO docs    â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚<â”€insertIdâ”€â”€â”€â”€â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚ (7)          â”‚
  â”‚               â”‚                 â”‚               â”‚<â”€7â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
  â”‚               â”‚                 â”‚<â”€{id,name}â”€â”€â”€â”€â”‚              â”‚              â”‚
  â”‚               â”‚<â”€resultâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚              â”‚              â”‚
  â”‚<â”€201 Createdâ”€â”€â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚ {id:7,msg}    â”‚                 â”‚               â”‚              â”‚              â”‚
  â”‚               â”‚                 â”‚               â”‚              â”‚              â”‚
```

---

## Class Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FolderController      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - folderService         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getAllFolders()       â”‚
â”‚ + createFolder()        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ uses
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FolderService         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - folderDAO: FolderDAO  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getAllFolders()       â”‚
â”‚ + createFolder(name)    â”‚
â”‚ + folderExists(id)      â”‚
â”‚ + deleteFolder(id)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ uses
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FolderDAO             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + findAll()             â”‚
â”‚ + findById(id)          â”‚
â”‚ + create(data)          â”‚
â”‚ + exists(id)            â”‚
â”‚ + delete(id)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DocumentController     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - documentService       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getAllDocuments()     â”‚
â”‚ + createDocument()      â”‚
â”‚ + searchDocuments()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ uses
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DocumentService       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - documentDAO           â”‚
â”‚ - folderDAO             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getDocuments(fid?)    â”‚
â”‚ + createDocument(data)  â”‚
â”‚ + searchDocuments(q)    â”‚
â”‚ + deleteDocument(id)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚          â”‚
     â”‚ uses     â”‚ uses
     â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DocumentDAO           â”‚  â”‚   FolderDAO             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + findAll()             â”‚  â”‚ + exists(id)            â”‚
â”‚ + findByFolderId()      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ + searchByName()        â”‚
â”‚ + create(data)          â”‚
â”‚ + delete(id)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        HTTP REQUEST                              â”‚
â”‚  POST /api/documents                                             â”‚
â”‚  Body: { name: "Report.pdf", folder_id: 1, ... }                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ROUTE HANDLER                                  â”‚
â”‚  router.post('/', createDocument)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CONTROLLER                                     â”‚
â”‚  - Extract: { name, folder_id, file_type, size }                â”‚
â”‚  - Call: await documentService.createDocument(...)               â”‚
â”‚  - Format: res.status(201).json({ id, name, message })          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SERVICE                                        â”‚
â”‚  Validate:                                                       â”‚
â”‚    âœ“ name not empty                                             â”‚
â”‚    âœ“ size > 0 and < 500MB                                       â”‚
â”‚    âœ“ file_type provided                                         â”‚
â”‚    âœ“ name.length <= 255                                         â”‚
â”‚                                                                  â”‚
â”‚  Check: await folderDAO.exists(folder_id)                        â”‚
â”‚    âœ“ folder exists? â†’ continue : throw error                    â”‚
â”‚                                                                  â”‚
â”‚  Sanitize:                                                       â”‚
â”‚    - name.trim()                                                 â”‚
â”‚    - file_type.toLowerCase()                                     â”‚
â”‚                                                                  â”‚
â”‚  Create: await documentDAO.create(sanitizedData)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DAO                                            â”‚
â”‚  Execute SQL:                                                    â”‚
â”‚    INSERT INTO documents (name, folder_id, file_type, size)     â”‚
â”‚    VALUES (?, ?, ?, ?)                                           â”‚
â”‚                                                                  â”‚
â”‚  Return: result.insertId (e.g., 7)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DATABASE                                       â”‚
â”‚  - Insert record into documents table                            â”‚
â”‚  - Auto-increment id = 7                                         â”‚
â”‚  - Return insertId                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ RESPONSE FLOWS BACK UP
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   HTTP RESPONSE                                  â”‚
â”‚  Status: 201 Created                                             â”‚
â”‚  Body: {                                                         â”‚
â”‚    id: 7,                                                        â”‚
â”‚    name: "Report.pdf",                                           â”‚
â”‚    message: "Document created successfully"                      â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Error Handling Flow

```
ERROR SCENARIO: User tries to create document in non-existent folder

Client          Controller        Service         FolderDAO       Database
  â”‚                 â”‚                â”‚               â”‚              â”‚
  â”‚â”€POSTâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚               â”‚              â”‚
  â”‚ folder_id: 999  â”‚                â”‚               â”‚              â”‚
  â”‚                 â”‚                â”‚               â”‚              â”‚
  â”‚                 â”‚â”€createDoc()â”€â”€â”€>â”‚               â”‚              â”‚
  â”‚                 â”‚                â”‚               â”‚              â”‚
  â”‚                 â”‚                â”‚â”€exists(999)â”€â”€>â”‚              â”‚
  â”‚                 â”‚                â”‚               â”‚â”€SELECTâ”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                 â”‚                â”‚               â”‚<â”€0 rowsâ”€â”€â”€â”€â”€â”€â”‚
  â”‚                 â”‚                â”‚<â”€falseâ”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
  â”‚                 â”‚                â”‚               â”‚              â”‚
  â”‚                 â”‚                â”‚â”€throw Errorâ”€â”€â”€X              â”‚
  â”‚                 â”‚                â”‚ "Folder not   â”‚              â”‚
  â”‚                 â”‚                â”‚  found"       â”‚              â”‚
  â”‚                 â”‚<â”€Errorâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚              â”‚
  â”‚<â”€404â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚               â”‚              â”‚
  â”‚ {error: "Folder â”‚                â”‚               â”‚              â”‚
  â”‚  not found"}    â”‚                â”‚               â”‚              â”‚
  â”‚                 â”‚                â”‚               â”‚              â”‚
```

---

## Folder Structure Visual

```
backend/
â”‚
â”œâ”€â”€ src/
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                    ðŸ“‹ TYPE DEFINITIONS
â”‚   â”‚   â””â”€â”€ index.ts              â€¢ Folder, Document interfaces
â”‚   â”‚                              â€¢ CreateFolderDTO, CreateDocumentDTO
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                   âš™ï¸ CONFIGURATION
â”‚   â”‚   â””â”€â”€ database.ts           â€¢ MySQL connection pool
â”‚   â”‚                              â€¢ Connection test on startup
â”‚   â”‚
â”‚   â”œâ”€â”€ dao/                      ðŸ—„ï¸ DATA ACCESS LAYER
â”‚   â”‚   â”œâ”€â”€ folderDAO.ts          â€¢ findAll(), findById(), create()
â”‚   â”‚   â”‚                          â€¢ exists(), delete()
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ documentDAO.ts        â€¢ findAll(), findByFolderId()
â”‚   â”‚                              â€¢ searchByName(), create(), delete()
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                 ðŸ’¼ BUSINESS LOGIC LAYER
â”‚   â”‚   â”œâ”€â”€ folderService.ts      â€¢ Validate folder name
â”‚   â”‚   â”‚                          â€¢ Coordinate folder operations
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ documentService.ts    â€¢ Validate document data
â”‚   â”‚                              â€¢ Verify folder exists
â”‚   â”‚                              â€¢ Sanitize input
â”‚   â”‚
â”‚   â”œâ”€â”€ controllers/              ðŸŽ® APPLICATION LAYER
â”‚   â”‚   â”œâ”€â”€ folderController.ts   â€¢ Handle HTTP for folders
â”‚   â”‚   â”‚                          â€¢ Parse requests, format responses
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ documentController.ts â€¢ Handle HTTP for documents
â”‚   â”‚                              â€¢ Map errors to status codes
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                   ðŸ›£ï¸ PRESENTATION LAYER
â”‚   â”‚   â”œâ”€â”€ folderRoutes.ts       â€¢ GET /api/folders
â”‚   â”‚   â”‚                          â€¢ POST /api/folders
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ documentRoutes.ts     â€¢ GET /api/documents
â”‚   â”‚                              â€¢ POST /api/documents
â”‚   â”‚                              â€¢ GET /api/documents/search
â”‚   â”‚
â”‚   â””â”€â”€ server.ts                 ðŸš€ APPLICATION ENTRY POINT
â”‚                                  â€¢ Configure Express
â”‚                                  â€¢ Setup middleware (CORS, JSON)
â”‚                                  â€¢ Mount routes
â”‚                                  â€¢ Start server
â”‚
â”œâ”€â”€ .env                          ðŸ” ENVIRONMENT VARIABLES
â”œâ”€â”€ .env.example                  ðŸ“„ ENV TEMPLATE
â”œâ”€â”€ tsconfig.json                 âš™ï¸ TYPESCRIPT CONFIG
â””â”€â”€ package.json                  ðŸ“¦ DEPENDENCIES
```
